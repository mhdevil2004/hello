workflows:
  bulletproof-ipa:
    name: Bulletproof IPA Download
    environment:
      flutter: stable
      xcode: 15.0
    scripts:
      - name: Step 1 - Fresh Start
        script: |
          echo "ğŸš€ STARTING BULLETPROOF BUILD..."
          pwd
          ls -la
      - name: Step 2 - Create Project
        script: |
          echo "ğŸ“± CREATING iOS PROJECT..."
          flutter create --org com.download.now --platforms=ios --overwrite .
          echo "âœ… Project created!"
          ls -la ios/
      - name: Step 3 - Get Deps
        script: |
          echo "ğŸ“¦ GETTING DEPENDENCIES..."
          flutter pub get
          echo "âœ… Dependencies done!"
      - name: Step 4 - Build IPA
        script: |
          echo "ğŸ—ï¸ BUILDING IPA FILE..."
          flutter build ipa --no-codesign
          echo "âœ… Build completed!"
      - name: Step 5 - Verify IPA
        script: |
          echo "ğŸ” CHECKING FOR IPA..."
          ls -la build/ios/ipa/
          echo "ğŸ‰ IPA READY FOR DOWNLOAD!"
    artifacts:
      - build/ios/ipa/*.ipa